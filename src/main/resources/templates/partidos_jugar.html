<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Registrar Resultado</title>

    <script>
        function toggleAvanzadas() {
            const avanzadas = document.getElementById("avanzadas");
            const modo = document.querySelector('input[name="modo"]:checked').value;

            avanzadas.style.display = (modo === "avanzadas") ? "block" : "none";
        }
    </script>
</head>
<body>

<h1>Registrar resultado del partido</h1>

<p>
    <b th:text="${partido.local.nombre}">Local</b>
    vs
    <b th:text="${partido.visitante.nombre}">Visitante</b>
</p>

<form th:action="@{/partidos/{idx}/registrar(idx=${index})}" method="post">

    <h3>Tipo de estadística</h3>

    <label>
        <input type="radio" name="modo" value="normal" checked onclick="toggleAvanzadas()">
        Normales
    </label>

    <label>
        <input type="radio" name="modo" value="avanzadas" onclick="toggleAvanzadas()">
        Avanzadas
    </label>

    <br><br>

    <label>Goles Local:</label>
    <input type="number" name="golesLocal" min="0" th:value="${partido.golesLocal}" required>

    <br><br>

    <label>Goles Visitante:</label>
    <input type="number" name="golesVisitante" min="0" th:value="${partido.golesVisitante}" required>

    <br><br>

    <div id="avanzadas" style="display:none;">

        <h2>Estadísticas avanzadas</h2>

        <h3 th:text="${partido.local.nombre}">Local</h3>

        <table border="1">
            <tr>
                <th>Jugador</th>
                <th>Goles</th>
                <th>Asistencias</th>
                <th>Amarillas</th>
                <th>Rojas</th>
            </tr>

            <tr th:each="j, i : ${jugadoresLocal}">
                <td th:text="${j.nombre}"></td>

                <td><input type="number" name="golesLocalJugadores" min="0"></td>
                <td><input type="number" name="asistenciasLocalJugadores" min="0"></td>
                <td><input type="number" name="amarillasLocalJugadores" min="0"></td>
                <td><input type="number" name="rojasLocalJugadores" min="0"></td>

                <input type="hidden" name="idLocalJugadores" th:value="${j.nombre}">
            </tr>

        </table>

        <br>

        <h3 th:text="${partido.visitante.nombre}">Visitante</h3>

        <table border="1">
            <tr>
                <th>Jugador</th>
                <th>Goles</th>
                <th>Asistencias</th>
                <th>Amarillas</th>
                <th>Rojas</th>
            </tr>

            <tr th:each="j, i : ${jugadoresVisitante}">
                <td th:text="${j.nombre}"></td>

                <td><input type="number" name="golesVisitanteJugadores" min="0"></td>
                <td><input type="number" name="asistenciasVisitanteJugadores" min="0"></td>
                <td><input type="number" name="amarillasVisitanteJugadores" min="0"></td>
                <td><input type="number" name="rojasVisitanteJugadores" min="0"></td>

                <input type="hidden" name="idVisitanteJugadores" th:value="${j.nombre}">
            </tr>

        </table>

    </div>

    <br>

    <button type="submit">Registrar</button>
    <a th:href="@{/partidos}">Cancelar</a>

</form>

</body>
</html>
